{"ast":null,"code":"import _slicedToArray from \"/Users/Annqi/Final_Year_Project/netlens_react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/Users/Annqi/Final_Year_Project/netlens_react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Annqi/Final_Year_Project/netlens_react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Annqi/Final_Year_Project/netlens_react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Annqi/Final_Year_Project/netlens_react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Annqi/Final_Year_Project/netlens_react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Annqi/Final_Year_Project/netlens_react/src/pages/LandingPage.jsx\";\nimport React, { Component } from \"react\";\nimport axios from '../baseUrl';\nimport MovieImages from '../components/MovieImages'; //import StarRating from '../components/StarRating.js';\n\nvar LandingPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LandingPage, _Component);\n\n  function LandingPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LandingPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LandingPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.apiKey = '4f65322e8d193ba9623a9e7ab5caa01e';\n    _this.state = {\n      topRatedRow: []\n      /** Make all API calls as soon as the MovieGenreRow component mounts. */\n\n    };\n\n    _this.getMovieRows = function (res, url) {\n      var results = res;\n      var movieRows = [];\n      console.log(res);\n      results.map(function (movie) {\n        console.log(\"asd\");\n\n        if (movie.data.poster_path !== null) {\n          var movieComponent = React.createElement(MovieImages, {\n            id: movie.data.id,\n            url: url,\n            poster: \"https://image.tmdb.org/t/p/original\" + movie.data.poster_path,\n            info: movie,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 27\n            },\n            __self: this\n          });\n          movieRows.push(movieComponent);\n        }\n      });\n      return movieRows;\n    };\n\n    _this.getTopRated = function () {\n      var result = [];\n      var link = [];\n      var count = 0;\n      var api = 'http://127.0.0.1:8000/api/toprated';\n      fetch(api).then(function (result) {\n        return result.json();\n      }).then(function (data) {\n        data.map(function (id) {\n          Object.entries(id).forEach(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n                key = _ref2[0],\n                value = _ref2[1];\n\n            var url = '/movie/' + value + '?api_key=' + _this.apiKey;\n            axios.get(url).then(function (res) {\n              result.push(res);\n              link.push(url);\n\n              if (count >= data.length - 1) {\n                var movieRows = _this.getMovieRows(result, link);\n\n                _this.setState({\n                  topRatedRow: movieRows\n                });\n              }\n\n              count++;\n            }).catch(function (error) {\n              console.log(error);\n            });\n          });\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(LandingPage, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.getTopRated();\n    }\n    /** Extract our movie data and pass it to our MovieGenre Component. */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"movieRow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"movieRow_heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"Top Rated\"), React.createElement(\"div\", {\n        className: \"movieRow_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, this.state.topRatedRow));\n    }\n  }]);\n\n  return LandingPage;\n}(Component);\n\nexport default LandingPage;","map":{"version":3,"sources":["/Users/Annqi/Final_Year_Project/netlens_react/src/pages/LandingPage.jsx"],"names":["React","Component","axios","MovieImages","LandingPage","apiKey","state","topRatedRow","getMovieRows","res","url","results","movieRows","console","log","map","movie","data","poster_path","movieComponent","id","push","getTopRated","result","link","count","api","fetch","then","json","Object","entries","forEach","key","value","get","length","setState","catch","error","err"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from '../baseUrl'; \nimport MovieImages from '../components/MovieImages';\n\n//import StarRating from '../components/StarRating.js';\n\nclass LandingPage extends Component {\n  apiKey = '4f65322e8d193ba9623a9e7ab5caa01e';\n  /** Hold each genre movie row in an array */\n  state = {\n    topRatedRow: [],\n  }\n\n  /** Make all API calls as soon as the MovieGenreRow component mounts. */\n  componentWillMount() {\n    this.getTopRated();\n  }\n\n  /** Extract our movie data and pass it to our MovieGenre Component. */\n  getMovieRows = (res, url) => {\n    const results = res;\n    let movieRows = [];\n    console.log(res);\n    results.map((movie) => {\n      console.log(\"asd\");\n       if (movie.data.poster_path !== null) {\n       const movieComponent = <MovieImages\n           id={movie.data.id}\n           url={url}\n           poster={\"https://image.tmdb.org/t/p/original\" + movie.data.poster_path}\n           info={movie} />\n        movieRows.push(movieComponent);\n       }\n    });\n   return movieRows;\n\n  }\n\n\n  /**\n   * Send request for movies that are top rated\n   */\n  getTopRated = () => {\n    let result = [];\n    let link = [];\n    let count = 0;\n    const api = 'http://127.0.0.1:8000/api/toprated';\n    fetch(api)\n        .then((result) => {\n            return result.json();\n        })\n        .then((data) => {\n            data.map((id) => {\n                Object.entries(id).forEach(([key, value]) => {\n                    let url = '/movie/' + value + '?api_key=' + this.apiKey;\n                    axios.get(url)\n                        .then(res => {\n                            result.push(res);\n                            link.push(url);\n                            if(count >= data.length-1){\n                                const movieRows = this.getMovieRows(result, link);\n                                this.setState({ topRatedRow: movieRows });\n                            }\n                            count++;\n                        }).catch(error => {\n                            console.log(error);\n                        })\n                });\n            })\n        }).catch((err) => {\n            console.log(err);\n        });\n\n  }\n\n   render() {\n\n      return (\n        <div className=\"movieRow\">\n\n        {/*<h1 className=\"movieRow_heading\">Top picks for you </h1>*/}\n          {/*<div className=\"movieRow_container\">*/}\n              {/*{this.state.trendingMovieRow}*/}\n          {/*</div>*/}\n\n           {/* <StarRating />  */}\n\n          <h1 className=\"movieRow_heading\">Top Rated</h1>\n          <div className=\"movieRow_container\">\n              {this.state.topRatedRow}\n          </div>\n        </div>\n      );\n   }\n}\n\nexport default LandingPage; "]},"metadata":{},"sourceType":"module"}